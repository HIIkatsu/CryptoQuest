<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CryptoQuest</title>
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:radial-gradient(ellipse at top,#0a0a1f 0%,#000 70%);color:#fff;min-height:100vh;overflow-x:hidden;position:relative;}
.stars-bg{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
.star{position:absolute;border-radius:50%;opacity:0.6;background:radial-gradient(circle,#4da8ff 0%,transparent 70%);animation:twinkle 4s ease-in-out infinite;}
.star.big{width:2px;height:2px;}
.star.medium{width:1px;height:1px;}
.star.small{width:0.5px;height:0.5px;}
@keyframes twinkle{0%,100%{opacity:0.4;transform:scale(1);}50%{opacity:1;transform:scale(1.4);}}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.container{max-width:400px;margin:0 auto;padding:28px 24px;position:relative;z-index:10;min-height:100vh;padding-bottom:100px;}
.header{text-align:center;margin-bottom:24px;}
.logo{font-size:36px;font-weight:700;background:linear-gradient(135deg,#4da8ff 0%,#7dc8ff 50%,#a8d8ff 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 20px rgba(77,168,255,0.3);margin-bottom:8px;}
.subtitle{font-size:15px;color:#b8b8d0;font-weight:400;background: rgba(20,20,35,0.8);padding:8px 16px;border-radius:20px;display:inline-block;backdrop-filter: blur(20px); border:1px solid rgba(77,168,255,0.1);}

/* –í–∫–ª–∞–¥–∫–∏ */
.tabs{display:flex; gap:8px; margin-bottom:16px;}
.tab{flex:1; padding:10px; background: rgba(30,30,50,0.8); border-radius:12px; text-align:center; cursor:pointer; user-select:none;}
.tab.active{background: linear-gradient(135deg,#4da8ff,#7dc8ff); color:#000;}
.tab-content{display:none;}
.tab-content.active{display:block;}

/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.stats-grid{display:grid;grid-template-columns:1fr 1fr; gap:20px; margin-bottom:24px;}
.stat-card{background: rgba(20,20,35,0.9); backdrop-filter:blur(20px); border:1px solid rgba(77,168,255,0.2); border-radius:16px; padding:24px 20px; text-align:center; position:relative;}
.balance,.level-display{font-size:28px;font-weight:700;background:linear-gradient(135deg,#4da8ff,#7dc8ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px;}
.stat-value{font-size:26px;font-weight:700;color:#4da8ff;margin-bottom:4px;}
.stat-label{font-size:14px;color:#9a9ab0;font-weight:500;}

/* –ö–Ω–æ–ø–∫–∏ */
.action-section{display:flex; flex-direction:column; gap:16px;}
button{outline:none; border:none; font-family:'Inter',sans-serif; user-select:none;}
.btn-main{background:linear-gradient(135deg, rgba(77,168,255,0.2), rgba(125,200,255,0.1)); backdrop-filter:blur(25px); border:2px solid rgba(77,168,255,0.5); border-radius:16px; padding:24px 28px; font-size:18px; font-weight:600; color:#fff; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; transition:all 0.15s ease;}
.btn-main:active{transform:scale(0.97);}
.btn-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px;}
.btn-secondary{background: rgba(30,30,50,0.8); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.15); border-radius:16px; padding:20px 24px; font-size:16px; font-weight:500; color:#e0e0e0; display:flex; align-items:center; justify-content:center; gap:10px; cursor:pointer; transition:all 0.15s ease;}
.btn-secondary:active{transform:scale(0.97);}

/* –ü—Ä–æ–∫–∞—á–∫–∏ */
.upgrade-card{background: rgba(20,20,35,0.9); padding:16px; border-radius:16px; margin-bottom:12px; display:flex; flex-direction:column; gap:6px; position:relative; text-align:center;}
.upgrade-card button{background:linear-gradient(135deg, rgba(77,168,255,0.2), rgba(125,200,255,0.1)); border:2px solid rgba(77,168,255,0.5); color:#fff; padding:10px; border-radius:12px; cursor:pointer; transition:all 0.15s ease;}
.upgrade-card button:active{transform:scale(0.97);}
.upgrade-price{font-size:12px;color:#7dc8ff;position:absolute;top:16px;right:16px;}
.info-btn{position:absolute;top:10px;left:10px;background:rgba(77,168,255,0.2);border-radius:50%;width:24px;height:24px;font-size:14px;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.15s ease;}
.info-btn:active{transform:scale(0.9);}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è */
.level-bar-container{margin-bottom:24px;}
.level-info{display:flex; justify-content:space-between; font-size:14px; font-weight:500; margin-bottom:4px; color:#b8b8d0;}
.level-bar-bg{width:100%; height:12px; background: rgba(77,168,255,0.15); border-radius:8px; overflow:hidden;}
.level-bar-fill{width:0%; height:100%; background: linear-gradient(90deg,#4da8ff,#7dc8ff); border-radius:8px 0 0 8px;}

/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:none;justify-content:center;align-items:center;z-index:50;}
.modal-content{width:90%;height:70%;border-radius:16px;overflow:hidden;background:rgba(10,10,25,0.95);position:relative;border:2px solid #4da8ff;box-shadow:0 0 20px rgba(77,168,255,0.4);}
.modal-close{position:absolute;top:10px;right:10px;color:#fff;font-size:24px;cursor:pointer;z-index:10;}
#map{width:100%;height:100%;}
</style>
</head>
<body>
<div class="stars-bg" id="stars"></div>

<div class="container">
<div class="header">
    <div class="logo">CryptoQuest</div>
    <div class="subtitle">AR Token Hunt ‚Ä¢ –ú–æ—Å–∫–≤–∞ 2026</div>
</div>

<div class="tabs">
    <div class="tab active" data-tab="main">–ì–ª–∞–≤–Ω–∞—è</div>
    <div class="tab" data-tab="upgrades">–ü—Ä–æ–∫–∞—á–∫–∏</div>
    <div class="tab" data-tab="quests">–ö–≤–µ—Å—Ç—ã</div>
</div>

<div class="tab-content active" id="main">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="balance" id="balance">1000 QTZ</div>
            <div class="stat-label">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="activeZones">0</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–æ–Ω</div>
        </div>
    </div>

    <div class="level-bar-container">
        <div class="level-info">
            <span>–£—Ä–æ–≤–µ–Ω—å <span id="levelNum">1</span></span>
            <span id="levelPercent">0%</span>
        </div>
        <div class="level-bar-bg">
            <div class="level-bar-fill" id="levelFill"></div>
        </div>
    </div>

    <div class="action-section">
        <button class="btn-main" id="openMapBtn">üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É</button>
        <button class="btn-main" id="startQuestBtn">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–≤–µ—Å—Ç</button>
        <div class="btn-grid">
            <button class="btn-secondary" id="scanBtn">üîç AR —Å–∫–∞–Ω–µ—Ä</button>
            <button class="btn-secondary" id="marketBtn">üíé P2P —Ä—ã–Ω–æ–∫</button>
        </div>
    </div>
</div>

<div class="tab-content" id="upgrades">
    <div class="upgrade-card" data-level="0" data-price="20">
        <span>–¢–æ—á–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è</span>
        <span class="upgrade-price">20 QTZ</span>
        <button>–ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
        <div class="info-btn" data-info="–õ–æ–∫–∞—Ü–∏—è –±—É–¥–µ—Ç —Ç–æ—á–Ω–µ–µ –Ω–∞ 20 –º–µ—Ç—Ä–æ–≤.">i</div>
    </div>
    <div class="upgrade-card" data-level="0" data-price="30">
        <span>–°–∫–æ—Ä–æ—Å—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</span>
        <span class="upgrade-price">30 QTZ</span>
        <button>–ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
        <div class="info-btn" data-info="–°–æ–∫—Ä–∞—â–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É —Å–∫–∞–Ω–∞–º–∏ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥.">i</div>
    </div>
    <div class="upgrade-card" data-level="0" data-price="50">
        <span>–ë–æ–Ω—É—Å –∑–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
        <span class="upgrade-price">50 QTZ</span>
        <button>–ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
        <div class="info-btn" data-info="–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É —Å –∫–∞–∂–¥–æ–≥–æ QR –Ω–∞ +5 QTZ.">i</div>
    </div>
</div>

<div class="tab-content" id="quests">
    <div class="upgrade-card">
        <span>–ù–∞–π–¥–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π QR-–∫–æ–¥ –Ω–∞ –¢—Ä—É–±–Ω–æ–π –ø–ª–æ—â–∞–¥–∏</span>
        <button>–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–≤–µ—Å—Ç</button>
    </div>
</div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ä—Ç—ã -->
<div class="modal" id="mapModal">
    <div class="modal-content" id="mapContent">
        <span class="modal-close" id="closeMap">&times;</span>
        <div id="map"></div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
<div class="modal" id="infoModal">
    <div class="modal-content" style="width:80%;height:auto;padding:20px;">
        <span class="modal-close" id="closeInfo">&times;</span>
        <div id="infoText" style="color:#fff;font-size:14px;"></div>
    </div>
</div>

<script>
// –ó–≤—ë–∑–¥—ã
(function(){
    const container = document.getElementById('stars');
    const sizes = ['big','medium','small'];
    for(let i=0;i<150;i++){
        const star = document.createElement('div');
        star.className='star '+sizes[Math.floor(Math.random()*sizes.length)];
        star.style.top=Math.random()*100+'%';
        star.style.left=Math.random()*100+'%';
        star.style.animationDelay=Math.random()*5+'s';
        star.style.animationDuration=(Math.random()*3+2)+'s';
        container.appendChild(star);
    }
})();

// –í–∫–ª–∞–¥–∫–∏
document.querySelectorAll('.tab').forEach(tab=>{
    tab.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});

// –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è
let level = 1, experience = 0, maxLevel = 10;
function updateLevelBar() {
    const percent = Math.min(experience,100);
    document.getElementById('levelFill').style.width = percent+'%';
    document.getElementById('levelPercent').innerText = percent+'%';
    document.getElementById('levelNum').innerText = level;
}

// –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞
let map, circles=[], questSpots = [
    {id:'tubnaya', text:'–ù–∞–π–¥–∏ NFT –∑–¥–µ—Å—å', coords:[55.7655,37.6203], radius:50},
    {id:'mitino', text:'–ù–∞–π–¥–∏ NFT –∑–¥–µ—Å—å', coords:[55.8451,37.3614], radius:50},
    {id:'gorky', text:'–ù–∞–π–¥–∏ NFT –∑–¥–µ—Å—å', coords:[55.7301,37.6010], radius:50},
    {id:'dns', text:'–ù–∞–π–¥–∏ NFT –∑–¥–µ—Å—å', coords:[55.9105,37.7365], radius:50},
    {id:'shchelkovskoe', text:'–ù–∞–π–¥–∏ NFT –∑–¥–µ—Å—å', coords:[55.8200,37.8530], radius:50}
];

function initMap(){
    map = new ymaps.Map("map", {
        center: [55.7558,37.6176],
        zoom: 11,
        controls: []
    });

    questSpots.forEach((spot,i)=>{
        let circle = new ymaps.Circle([
            spot.coords, spot.radius
        ], {
            hintContent: spot.text,
            balloonContent: spot.text
        }, {
            fillColor:'#ff4d4d88',
            strokeColor:'#ff4d4d',
            strokeWidth:2,
            draggable:false,
            strokeOpacity:1,
            fillOpacity:0.5
        });
        map.geoObjects.add(circle);
        circles.push(circle);
    });
    document.getElementById('activeZones').innerText = questSpots.length;
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç—ã
document.getElementById('openMapBtn').addEventListener('click',()=>{
    document.getElementById('mapModal').style.display='flex';
    if(!map) ymaps.ready(initMap);
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç—ã –∫—Ä–µ—Å—Ç–∏–∫–æ–º
document.getElementById('closeMap').addEventListener('click',()=>{document.getElementById('mapModal').style.display='none';});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –æ–∫–Ω–∞
document.getElementById('mapModal').addEventListener('click', (e)=>{
    if(e.target===document.getElementById('mapModal')){
        document.getElementById('mapModal').style.display='none';
    }
});

// –ê–ø–≥—Ä–µ–π–¥—ã
document.querySelectorAll('.upgrade-card').forEach(card=>{
    const btn = card.querySelector('button');
    btn?.addEventListener('click',()=>{
        if(!card.dataset.price) return;
        let price = parseInt(card.dataset.price);
        let balanceEl = document.getElementById('balance');
        let balance = parseInt(balanceEl.innerText);
        if(balance<price){alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤!');return;}
        balance-=price;
        balanceEl.innerText=balance+' QTZ';
        let lvl = parseInt(card.dataset.level);
        if(lvl<10){
            lvl++;
            card.dataset.level=lvl;
            experience+=10;
            if(experience>=100){experience=0; level=Math.min(level+1,maxLevel);}
            updateLevelBar();
            price = Math.floor(price*1.15);
            card.dataset.price=price;
            card.querySelector('.upgrade-price').innerText = price+' QTZ';

            // –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ –¥–ª—è —Ç–æ—á–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏
            if(card.querySelector('span').innerText.includes('–¢–æ—á–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è')){
                circles.forEach((circle,i)=>{
                    questSpots[i].radius=Math.max(10,questSpots[i].radius-5);
                    circle.geometry.setRadius(questSpots[i].radius);
                });
            }
        } else alert('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç!');
    });
});

// Info –∫–Ω–æ–ø–∫–∏
document.querySelectorAll('.info-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{
        document.getElementById('infoText').innerText = btn.dataset.info;
        document.getElementById('infoModal').style.display='flex';
    });
});
document.getElementById('closeInfo').addEventListener('click',()=>{document.getElementById('infoModal').style.display='none';});

// === AR —Å–∫–∞–Ω–µ—Ä Telegram ===
document.getElementById('scanBtn').addEventListener('click',()=>{
    const tg = window.Telegram?.WebApp;
    if(tg && tg.showScanQrPopup){
        tg.showScanQrPopup(
            { text: "–ù–∞–≤–µ–¥–∏ –Ω–∞ QR-–∫–æ–¥" },
            async (scanResult) => {
                const qrData = scanResult.data;
                alert("‚úÖ QR –Ω–∞–π–¥–µ–Ω: "+qrData);

                // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ Node.js —Å–µ—Ä–≤–µ—Ä
                try{
                    await fetch('https://—Ç–≤–æ–π-—Å–µ—Ä–≤–µ—Ä.com/scan', {
                        method: 'POST',
                        headers: { 'Content-Type':'application/json' },
                        body: JSON.stringify({ qrData })
                    });
                } catch(err){
                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:', err);
                }
            }
        );
    } else {
        alert("üîç AR-—Å–∫–∞–Ω–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Ç–æ–ª—å–∫–æ –≤ Telegram WebApp)");
    }
});
</script>
</body
