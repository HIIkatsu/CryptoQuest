<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CryptoQuest</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
/* –°–±—Ä–æ—Å –∏ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:radial-gradient(ellipse at top,#0a0a1f 0%,#000 70%);color:#fff;min-height:100vh;overflow-x:hidden;position:relative;}
.stars-bg{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
.star{position:absolute;border-radius:50%;opacity:0.6;background:radial-gradient(circle,#4da8ff 0%,transparent 70%);animation:twinkle 4s ease-in-out infinite;}
.star.big{width:2px;height:2px;}
.star.medium{width:1px;height:1px;}
.star.small{width:0.5px;height:0.5px;}
@keyframes twinkle{0%,100%{opacity:0.4;transform:scale(1);}50%{opacity:1;transform:scale(1.4);}}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.container{max-width:400px;margin:0 auto;padding:28px 24px;position:relative;z-index:10;min-height:100vh;padding-bottom:100px;}
.header{text-align:center;margin-bottom:24px;}
.logo{font-size:36px;font-weight:700;background:linear-gradient(135deg,#4da8ff 0%,#7dc8ff 50%,#a8d8ff 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 20px rgba(77,168,255,0.3);margin-bottom:8px;}
.subtitle{font-size:15px;color:#b8b8d0;font-weight:400;background: rgba(20,20,35,0.8);padding:8px 16px;border-radius:20px;display:inline-block;backdrop-filter: blur(20px); border:1px solid rgba(77,168,255,0.1);}

/* –í–∫–ª–∞–¥–∫–∏ */
.tabs{display:flex; gap:8px; margin-bottom:16px;}
.tab{flex:1; padding:10px; background: rgba(30,30,50,0.8); border-radius:12px; text-align:center; cursor:pointer; user-select:none; transition:0.15s;}
.tab.active{background: linear-gradient(135deg,#4da8ff,#7dc8ff); color:#000;}
.tab-content{display:none;}
.tab-content.active{display:block;}

/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.stats-grid{display:grid;grid-template-columns:1fr 1fr; gap:20px; margin-bottom:24px;}
.stat-card{background: rgba(20,20,35,0.9); backdrop-filter:blur(20px); border:1px solid rgba(77,168,255,0.2); border-radius:16px; padding:24px 20px; text-align:center; position:relative;}
.balance,.level-display{font-size:28px;font-weight:700;background:linear-gradient(135deg,#4da8ff,#7dc8ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px;}
.stat-value{font-size:26px;font-weight:700;color:#4da8ff;margin-bottom:4px;}
.stat-label{font-size:14px;color:#9a9ab0;font-weight:500;}

/* –ö–Ω–æ–ø–∫–∏ */
.action-section{display:flex; flex-direction:column; gap:16px;}
button{outline:none; border:none; font-family:'Inter',sans-serif; user-select:none;}
.btn-main{background:linear-gradient(135deg, rgba(77,168,255,0.2), rgba(125,200,255,0.1)); backdrop-filter:blur(25px); border:2px solid rgba(77,168,255,0.5); border-radius:16px; padding:24px 28px; font-size:18px; font-weight:600; color:#fff; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; transition:all 0.15s ease;}
.btn-main:active{transform:scale(0.97);}
.btn-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px;}
.btn-secondary{background: rgba(30,30,50,0.8); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.15); border-radius:16px; padding:20px 24px; font-size:16px; font-weight:500; color:#e0e0e0; display:flex; align-items:center; justify-content:center; gap:10px; cursor:pointer; transition:all 0.15s ease;}
.btn-secondary:active{transform:scale(0.97);}

/* –ü—Ä–æ–∫–∞—á–∫–∏ */
.upgrade-card{background: rgba(20,20,35,0.9); padding:16px; border-radius:16px; margin-bottom:12px; display:flex; flex-direction:column; gap:6px; position:relative;}
.upgrade-card button{background:linear-gradient(135deg, rgba(77,168,255,0.2), rgba(125,200,255,0.1)); border:2px solid rgba(77,168,255,0.5); color:#fff; padding:10px; border-radius:12px; cursor:pointer; transition:all 0.15s ease;}
.upgrade-card button:active{transform:scale(0.97);}
.upgrade-price{font-size:12px;color:#7dc8ff;}
.info-btn{position:absolute;top:16px;right:16px;background:rgba(77,168,255,0.2);border-radius:50%;width:24px;height:24px;font-size:14px;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.15s ease;}
.info-btn:active{transform:scale(0.9);}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è */
.level-bar-container{margin-bottom:24px;}
.level-info{display:flex; justify-content:space-between; font-size:14px; font-weight:500; margin-bottom:4px; color:#b8b8d0;}
.level-bar-bg{width:100%; height:12px; background: rgba(77,168,255,0.15); border-radius:8px; overflow:hidden;}
.level-bar-fill{width:0%; height:100%; background: linear-gradient(90deg,#4da8ff,#7dc8ff); border-radius:8px 0 0 8px;}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞ */
.quest-progress-bg{width:100%; height:10px; background: rgba(77,168,255,0.2); border-radius:6px; overflow:hidden; margin-top:6px;}
.quest-progress-fill{height:100%; background: linear-gradient(90deg,#4da8ff,#7dc8ff); width:0%; border-radius:6px 0 0 6px;}

/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:none;justify-content:center;align-items:center;z-index:50;}
.modal-content{width:90%;height:70%;border-radius:16px;overflow:hidden;background:rgba(10,10,25,0.95);position:relative;border:2px solid #4da8ff;box-shadow:0 0 20px rgba(77,168,255,0.4);}
.modal-close{position:absolute;top:10px;right:10px;color:#fff;font-size:24px;cursor:pointer;z-index:100;}
#map{width:100%;height:100%;}
</style>
</head>
<body>
<div class="stars-bg" id="stars"></div>

<div class="container">
<div class="header">
    <div class="logo">CryptoQuest</div>
    <div class="subtitle">AR Token Hunt ‚Ä¢ –ú–æ—Å–∫–≤–∞ 2026</div>
</div>

<div class="tabs">
    <div class="tab active" data-tab="main">–ì–ª–∞–≤–Ω–∞—è</div>
    <div class="tab" data-tab="upgrades">–ü—Ä–æ–∫–∞—á–∫–∏</div>
    <div class="tab" data-tab="quests">–ö–≤–µ—Å—Ç—ã</div>
</div>

<div class="tab-content active" id="main">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="balance" id="balance">1000 QTZ</div>
            <div class="stat-label">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="activeZones">0</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–æ–Ω</div>
        </div>
    </div>

    <div class="level-bar-container">
        <div class="level-info">
            <span id="levelNum">–£—Ä–æ–≤–µ–Ω—å 1</span>
            <span id="levelPercent">0%</span>
        </div>
        <div class="level-bar-bg">
            <div class="level-bar-fill" id="levelFill"></div>
        </div>
    </div>

    <div class="action-section">
        <button class="btn-main" id="openMapBtn">üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É</button>
        <button class="btn-main" id="startQuestBtn">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–≤–µ—Å—Ç</button>
        <div class="btn-grid">
            <button class="btn-secondary" id="scanBtn">üîç AR —Å–∫–∞–Ω–µ—Ä</button>
            <button class="btn-secondary" id="marketBtn">üíé P2P —Ä—ã–Ω–æ–∫</button>
        </div>
    </div>
</div>

<div class="tab-content" id="upgrades">
    <div class="upgrade-card">
        <span>–¢–æ—á–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è</span>
        <span class="upgrade-price">–¶–µ–Ω–∞: 20 QTZ</span>
        <button class="upgrade-btn" data-cost="20" data-type="accuracy">–ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
        <div class="info-btn" data-info="–õ–æ–∫–∞—Ü–∏—è –±—É–¥–µ—Ç —Ç–æ—á–Ω–µ–µ –Ω–∞ 20 –º–µ—Ç—Ä–æ–≤.">i</div>
    </div>
    <div class="upgrade-card">
        <span>–°–∫–æ—Ä–æ—Å—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</span>
        <span class="upgrade-price">–¶–µ–Ω–∞: 30 QTZ</span>
        <button class="upgrade-btn" data-cost="30" data-type="speed">–ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
        <div class="info-btn" data-info="–°–æ–∫—Ä–∞—â–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É —Å–∫–∞–Ω–∞–º–∏ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥.">i</div>
    </div>
    <div class="upgrade-card">
        <span>–ë–æ–Ω—É—Å –∑–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
        <span class="upgrade-price">–¶–µ–Ω–∞: 50 QTZ</span>
        <button class="upgrade-btn" data-cost="50" data-type="bonus">–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É QR +5 QTZ.</button>
        <div class="info-btn" data-info="–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É —Å –∫–∞–∂–¥–æ–≥–æ QR –Ω–∞ +5 QTZ.">i</div>
    </div>
</div>

<div class="tab-content" id="quests">
    <div class="upgrade-card">
        <span>–ù–∞–π–¥–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π QR-–∫–æ–¥ –Ω–∞ –¢—Ä—É–±–Ω–æ–π –ø–ª–æ—â–∞–¥–∏</span>
        <div class="quest-progress-bg"><div class="quest-progress-fill" id="quest1Progress"></div></div>
        <button class="quest-btn">–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–≤–µ—Å—Ç</button>
    </div>
</div>
</div>

<div class="modal" id="mapModal">
    <div class="modal-content">
        <span class="modal-close" id="closeMap">&times;</span>
        <div id="map"></div>
    </div>
</div>

<div class="modal" id="infoModal">
    <div class="modal-content" style="width:80%;height:auto;padding:20px;">
        <span class="modal-close" id="closeInfo">&times;</span>
        <div id="infoText" style="color:#fff;font-size:14px;"></div>
    </div>
</div>

<script>
// –ó–≤—ë–∑–¥—ã
(function(){
    const container=document.getElementById('stars');
    const sizes=['big','medium','small'];
    for(let i=0;i<150;i++){
        const star=document.createElement('div');
        star.className='star '+sizes[Math.floor(Math.random()*sizes.length)];
        star.style.top=Math.random()*100+'%';
        star.style.left=Math.random()*100+'%';
        star.style.animationDelay=Math.random()*5+'s';
        star.style.animationDuration=(Math.random()*3+2)+'s';
        container.appendChild(star);
    }
})();

// –í–∫–ª–∞–¥–∫–∏
document.querySelectorAll('.tab').forEach(tab=>{
    tab.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
let userExp=0,userLevel=1,userBalance=1000;
let upgrades={accuracy:0,speed:0,bonus:0};
const expPerLevel=100;
function updateLevelBar(){
    const percent=Math.min(100,(userExp/expPerLevel)*100);
    document.getElementById('levelFill').style.width=percent+'%';
    document.getElementById('levelPercent').innerText=Math.floor(percent)+'%';
    document.getElementById('levelNum').innerText='–£—Ä–æ–≤–µ–Ω—å '+userLevel;
}
updateLevelBar();

// –ö–≤–µ—Å—Ç—ã
let quests=[{id:'quest1',name:'–ù–∞–π–¥–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π QR-–∫–æ–¥ –Ω–∞ –¢—Ä—É–±–Ω–æ–π –ø–ª–æ—â–∞–¥–∏',progress:0,rewardExp:20,rewardQtZ:5,completed:false}];
document.querySelectorAll('.quest-btn').forEach((btn,index)=>{
    btn.addEventListener('click',()=>{
        let quest=quests[index];
        if(quest.completed){alert('–ö–≤–µ—Å—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω!'); return;}
        quest.completed=true;
        const bonus=upgrades.bonus*5;
        userExp+=quest.rewardExp;
        userBalance+=quest.rewardQtZ+bonus;
        document.getElementById('balance').innerText=userBalance+' QTZ';
        document.getElementById('quest1Progress').style.width='100%';
        if(userExp>=expPerLevel){userLevel+=1; userExp-=expPerLevel; alert('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è '+userLevel+'!');}
        updateLevelBar();
        alert(`–ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω! +${quest.rewardExp} XP, +${quest.rewardQtZ+bonus} QTZ`);
    });
});

// –ü—Ä–æ–∫–∞—á–∫–∏
document.querySelectorAll('.upgrade-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{
        const cost=parseInt(btn.dataset.cost);
        const type=btn.dataset.type;
        if(userBalance>=cost){
            userBalance-=cost;
            upgrades[type]+=1;
            document.getElementById('balance').innerText=userBalance+' QTZ';
            alert(`–ü—Ä–æ–∫–∞—á–∫–∞ "${type}" –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: ${upgrades[type]}`);
        }else{alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏!');}
    });
});

// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
document.querySelectorAll('.info-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{
        document.getElementById('infoText').innerText=btn.dataset.info;
        document.getElementById('infoModal').style.display='flex';
    });
});
document.getElementById('closeInfo').addEventListener('click',()=>{document.getElementById('infoModal').style.display='none';});

// –ö–∞—Ä—Ç–∞
let map;
let questSpots=[
{id:'tubnaya',name:'–¢—Ä—É–±–Ω–∞—è –ø–ª.',coords:[55.7655,37.6203],color:'#4da8ff'},
{id:'mitino',name:'–†–∞–¥–∏–æ—Ä—ã–Ω–æ–∫ –ú–∏—Ç–∏–Ω–æ',coords:[55.8451,37.3614],color:'#7dc8ff'},
{id:'gorky',name:'–ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ',coords:[55.7301,37.6010],color:'#4da8ff'},
{id:'dns',name:'DNS –ú—ã—Ç–∏—â–∏',coords:[55.9105,37.7365],color:'#7dc8ff'},
{id:'shchelkovskoe',name:'–ú–µ—Ç—Ä–æ –©—ë–ª–∫–æ–≤—Å–∫–æ–µ',coords:[55.8200,37.8530],color:'#7dc8ff'}
];
document.getElementById('activeZones').innerText=questSpots.length;

document.getElementById('openMapBtn').addEventListener('click',()=>{
    document.getElementById('mapModal').style.display='flex';
    if(!map){
        map=L.map('map',{zoomControl:false,attributionControl:false}).setView([55.7558,37.6176],11);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:''}).addTo(map);
        questSpots.forEach(spot=>{
            const marker=L.circleMarker(
