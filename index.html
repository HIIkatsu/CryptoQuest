<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CryptoQuest</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, sans-serif;
            background: #000; 
            color: #fff; 
            min-height: 100vh; 
            overflow-x: hidden;
            position: relative;
        }

        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: #4da8ff;
            border-radius: 50%;
            width: 1px;
            height: 1px;
            opacity: 0.5;
            animation: shine 3s infinite ease-in-out;
        }

        @keyframes shine {
            0%,100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.25); }
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 28px 24px;
            position: relative;
            z-index: 2;
        }

        .header {
            margin-bottom: 40px;
            text-align: right;
        }

        .logo {
            font-size: 34px;
            font-weight: 700;
            background: linear-gradient(135deg, #4da8ff, #7ec8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 15px;
            color: #b8b8d0;
            background: rgba(20,20,30,0.6);
            padding: 6px 12px;
            border-radius: 8px;
            display: inline-block;
            backdrop-filter: blur(15px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: rgba(20,20,35,0.7);
            border: 1px solid rgba(77,168,255,0.25);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .balance {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #4da8ff, #7ec8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 14px;
            color: #9a9ab0;
            font-weight: 500;
        }

        .map-card
        <div class="map-card">
    <svg viewBox="0 0 400 260" style="width:100%; height:100%; border-radius:12px;">
        <!-- –ú–æ—Å–∫–≤–∞ -->
        <rect fill="#1a1a2e" width="400" height="260" rx="12"/>
        <!-- –ú–æ—Å–∫–≤–∞-—Ä–µ–∫–∞ -->
        <path d="M50 180 Q200 200 350 185 L350 260 L50 260Z" fill="#2a3a5e"/>
        
        <!-- –¢–æ—á–∫–∏ QR (—Å–≤–µ—Ç—è—Ç—Å—è) -->
        <!-- –¢—Ä—É–±–Ω–∞—è -->
        <circle cx="180" cy="80" r="6" fill="#4da8ff" stroke="#7ec8ff" stroke-width="1">
            <animate attributeName="r" values="6;8;6" dur="2s" repeatCount="indefinite"/>
        </circle>
        <circle cx="180" cy="80" r="10" fill="none" stroke="#4da8ff" stroke-width="1" opacity="0.3">
            <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite"/>
            <animate attributeName="r" values="10;14;10" dur="2s" repeatCount="indefinite"/>
        </circle>
        
        <!-- –ú–∏—Ç–∏–Ω–æ (—Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥) -->
        <circle cx="80" cy="50" r="6" fill="#4da8ff" stroke="#7ec8ff" stroke-width="1">
            <animate attributeName="r" values="6;8;6" dur="2.5s" repeatCount="indefinite"/>
        </circle>
        
        <!-- –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ (—é–≥) -->
        <circle cx="280" cy="200" r="6" fill="#4da8ff" stroke="#7ec8ff" stroke-width="1">
            <animate

        #map {
            width: 100%;
            height: 100%;
        }

        .action-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .btn-main {
            padding: 20px 24px;
            border-radius: 12px;
            border: 2px solid rgba(77,168,255,0.5);
            background: linear-gradient(135deg, rgba(77,168,255,0.25), rgba(125,200,255,0.1));
            color: #fff;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .btn-main:hover {
            background: rgba(77,168,255,0.35);
            transform: translateY(-2px);
        }

        .btn-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .btn-secondary {
            padding: 16px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(30,30,45,0.7);
            color: #e0e0e0;
            font-size: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(45,45,65,0.9);
            border-color: rgba(77,168,255,0.3);
            transform: translateY(-1px);
        }
    </style>
</head>

<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <div class="header">
            <div class="logo">CryptoQuest</div>
            <div class="subtitle">AR Token Hunt ‚Ä¢ –ú–æ—Å–∫–≤–∞ 2026</div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="balance" id="balance">0 QTZ</div>
                <div class="stat-label">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</div>
            </div>
            <div class="stat-card">
                <div class="stat-label" style="font-size: 24px; font-weight: 600;">18</div>
                <div class="stat-label">–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–æ–Ω</div>
            </div>
        </div>

        <div class="map-card">
            <div id="map"></div>
        </div>

        <div class="action-section">
            <button class="btn-main" id="startQuest">
                üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–≤–µ—Å—Ç
            </button>
            <div class="btn-grid">
                <button class="btn-secondary" id="scanAR">üîç AR —Å–∫–∞–Ω–µ—Ä</button>
                <button class="btn-secondary" id="market">üíé P2P —Ä—ã–Ω–æ–∫</button>
            </div>
        </div>
    </div>

    <script>
        // Telegram API
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
            tg.MainButton.setText("üí∞ –ö–æ—à–µ–ª—ë–∫").show().onClick(() => {
                tg.showAlert("üí∞ –ö–æ—à–µ–ª—ë–∫

–ë–∞–ª–∞–Ω—Å: 0 QTZ");
            });
        }

        // –ó–≤—ë–∑–¥—ã
        const stars = document.getElementById('stars');
        for (let i = 0; i < 120; i++) {
            const s = document.createElement('div');
            s.classList.add('star');
            s.style.left = Math.random() * 100 + '%';
            s.style.top = Math.random() * 100 + '%';
            s.style.animationDelay = (Math.random() * 5) + 's';
            stars.appendChild(s);
        }

        // –ö–Ω–æ–ø–∫–∏
        document.getElementById('startQuest').addEventListener('click', () => {
            document.getElementById('balance').innerText = "1 QTZ";
            tg?.MainButton?.setText("üí∞ 1 QTZ");
            tg?.showAlert?.("‚úÖ –ö–≤–µ—Å—Ç –Ω–∞—á–∞—Ç!");
        });

        document.getElementById('scanAR').addEventListener('click', () => {
            if (tg?.showScanQrPopup) {
                tg.showScanQrPopup({text: "–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ QR-–∫–æ–¥"}, (data) => {
                    tg.showAlert("‚úÖ –ù–∞–π–¥–µ–Ω QR!
+1 QTZ");
                });
            } else {
                alert("AR-—Å–∫–∞–Ω–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ Telegram.");
            }
        });

        document.getElementById('market').addEventListener('click', () => {
            tg?.showAlert?.("üíé –†—ã–Ω–æ–∫ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç!");
        });

        // –ö–∞—Ä—Ç–∞ Leaflet
        window.addEventListener('load', () => {
            if (!window.L) return;

            const map = L.map('map', { zoomControl: false }).setView([55.7558, 37.6176], 11);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

            const spots = [
                { id: 'claim_tubnaya', name: '–¢—Ä—É–±–Ω–∞—è –ø–ª–æ—â–∞–¥—å', coords: [55.7655, 37.6203] },
                { id: 'claim_mitino', name: '–ú–∏—Ç–∏–Ω–æ', coords: [55.8451, 37.3614] },
                { id: 'claim_gorky', name: '–ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ', coords: [55.7301, 37.6010] },
                { id: 'claim_dns', name: '–ú—ã—Ç–∏—â–∏ DNS', coords: [55.9105, 37.7365] }
            ];

            spots.forEach(spot => {
                const m = L.circleMarker(spot.coords, {
                    radius: 7,
                    color: '#4da8ff',
                    fillColor: '#4da8ff',
                    fillOpacity: 0.9
                }).addTo(map);
                m.bindPopup(spot.name);
                m.on('click', () => {
                    tg?.showAlert?.(`üìç ${spot.name}
–ò—â–∏ QR-–∫–æ–¥ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏!`);
                });
            });
        });
    </script>
</body>
</html>
